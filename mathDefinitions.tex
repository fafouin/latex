%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% USEFUL COMMANDS FOR MATHEMATICAL OPERATORS
%%%
%%% Author: Louis-Philippe Rousseau (ULaval)
%%% Created: ages ago
%%% Updated: November 2016, January 2017
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%% LOAD NECESSARY PACKAGES %%%
\RequirePackage{mathtools, bm, amssymb}
\RequirePackage{xifthen}

%%% ------------------------------------------------------------------------ %%%
%%% PAIRED DELIMITERS %%%
% the starred version adjusts the height of the delimiters, like \left...\right
\DeclarePairedDelimiter{\bp}{(}{)} % parentheses
\DeclarePairedDelimiter{\bsq}{[}{]} % square brackets
\DeclarePairedDelimiter{\bbr}{\{}{\}} % curly braces
\DeclarePairedDelimiter{\abs}{\lvert}{\rvert} % absolute value
\DeclarePairedDelimiter{\norm}{\lVert}{\rVert} % Euclidian norm
\DeclarePairedDelimiter{\avg}{\langle}{\rangle} % average value
\DeclarePairedDelimiter{\floor}{\lfloor}{\rfloor} % floor operator
\DeclarePairedDelimiter{\ceil}{\lceil}{\rceil} % ceil operator
\DeclarePairedDelimiter{\round}{\lfloor}{\rceil} % round operator


%%% ------------------------------------------------------------------------ %%%
%%% MATHEMATICAL OPERATORS %%%
\DeclareMathOperator{\sinc}{sinc} % cardinal sine (sinc) function
\DeclareMathOperator{\rect}{rect} % rectangular function
\DeclareMathOperator{\sgn}{sgn} % sign function
\DeclareMathOperator{\E}{\mathsf{E}} % expected value
\DeclareMathOperator{\var}{Var} % variance
\DeclareMathOperator{\cov}{Cov} % covariance
\DeclareMathOperator{\corr}{Corr} % correlation coefficient
\DeclareMathOperator{\tr}{tr} % trace (matrix)
\DeclareMathOperator{\ft}{\mathcal{F}} % Fourier transform
\newcommand*{\ift}{\ft^{-1}} % inverse Fourier transform
\DeclareMathOperator{\atantwo}{atan2} % two-arguments arctangent


%%% ------------------------------------------------------------------------ %%%
%%% SYMBOLS AND NOTATION %%%

% vectors and matrices as bold characters
\newcommand*{\V}[1]{\bm{#1}} % vector
\newcommand*{\uV}[1]{\bm{\hat{#1}}} % unit vector
\newcommand*{\M}[1]{\bm{\mathrm{#1}}} % matrix

% additional symbols
\newcommand*{\J}{\mathrm{j}} % imaginary unit (roman)
\newcommand*{\e}{\mathrm{e}} % Euler's number (roman)
\newcommand*{\dif}{\mathrm{d}} % differential (roman)
\newcommand*{\del}{\V{\nabla}} % del (gradient, divergence and curl)
\newcommand*{\mdef}{\triangleq} % mathematical definition
%\newcommand*{\mdef}{\coloneqq} % mathematical definition (alternative)

% derivative and partial derivative
% usage (same for \Dp): \D[order (1 if omitted or empty)]{function}{variable}
% examples: \D{f(x)}{x} => d(f(x))/dx, \D[2]{f(x)}{x} => d^2(f(x))/dx^2
\newcommand*{\D}[3][]{\frac{\dif\ifthenelse{\isempty{#1}}{}{^#1}\,#2}{\dif #3\ifthenelse{\isempty{#1}}{}{^#1}}}
\newcommand*{\Dp}[3][]{\frac{\partial\ifthenelse{\isempty{#1}}{}{^#1}\,#2}{\partial #3\ifthenelse{\isempty{#1}}{}{^#1}}}

% evaluated at
% usage: \evalat{function}{lower limit or rule}{upper limit (optional)}
% example: \evalat{f(x)}{2}{4} => f(x)|_2^4, \evalat{f(x)}{x=x_0}{} => f(x)|_{x=x_0}
\newcommand*{\evalat}[3]{\left. #1 \right\rvert\sb{#2}\ifthenelse{\isempty{#3}}{}{^{#3}}}

% redefine underscore (_) to produce roman subscripts
% use \sb{} for italic subscripts
%\catcode`_=\active
%\newcommand_[1]{\ensuremath{\sb{\mathrm{#1}}}}
\begingroup
  \catcode`\_=\active
  \gdef_#1{\ensuremath{\sb{\mathrm{#1}}}}
\endgroup
\mathcode`\_=\string"8000
\catcode`\_=12
\newcommand*{\T}[1]{\mathrm{#1}} % shorter command for roman math font

